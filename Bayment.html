<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>الدفع - فضفضة</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    .payment-container {
      max-width: 600px;
      margin: 40px auto;
      background: white;
      padding: 25px;
      border-radius: 14px;
      box-shadow: 0 3px 15px rgba(0,0,0,0.1);
      text-align: center;
    }
    .btn-paypal {
      background-color: #003087;
      color: white;
      padding: 14px 30px;
      border-radius: 14px;
      font-weight: 700;
      text-decoration: none;
      display: inline-block;
      margin: 20px 0;
    }
    .bank-details {
      background: #f0f3fa;
      padding: 15px;
      border-radius: 12px;
      margin-top: 20px;
      font-weight: 600;
      color: #333;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="container">
      <h1 class="logo">فضفضة - الدفع</h1>
    </div>
  </header>

  <main class="payment-container">
    <h2>ملخص الحجز</h2>
    <div id="summary"></div>

    <h3>خيارات الدفع</h3>

    <a href="#" id="paypalBtn" class="btn-paypal" target="_blank">الدفع عبر PayPal</a>

    <div class="bank-details">
      <h4>التحويل البنكي</h4>
      <p>رقم الحساب: 123456789</p>
      <p>اسم البنك: بنك فضفضة</p>
      <p>بعد التحويل، يرجى التواصل عبر واتساب: <a href="https://wa.me/967718488431" target="_blank">00967718488431</a></p>
    </div>
  </main>

  <script>
    const bookingData = JSON.parse(localStorage.getItem('bookingData'));

    if (!bookingData) {
      document.getElementById('summary').innerHTML = '<p>لم يتم العثور على بيانات الحجز. الرجاء العودة وحجز جلسة أولاً.</p>';
      document.getElementById('paypalBtn').style.display = 'none';
    } else {
      const summaryEl = document.getElementById('summary');
      summaryEl.innerHTML = `
        <p><strong>اسم المستخدم:</strong> ${bookingData.username}</p>
        <p><strong>نوع الجلسة:</strong> ${bookingData.sessionType === 'text' ? 'دردشة نصية' : bookingData.sessionType === 'audio' ? 'د<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>الدفع - فضفضة</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    .payment-container {
      max-width: 600px;
      margin: 40px auto;
      background: white;
      padding: 25px;
      border-radius: 14px;
      box-shadow: 0 3px 15px rgba(0,0,0,0.1);
      text-align: center;
    }
    .btn-paypal {
      background-color: #003087;
      color: white;
      padding: 14px 30px;
      border-radius: 14px;
      font-weight: 700;
      text-decoration: none;
      display: inline-block;
      margin: 20px 0;
      cursor: pointer;
    }
    .bank-details {
      background: #f0f3fa;
      padding: 15px;
      border-radius: 12px;
      margin-top: 20px;
      font-weight: 600;
      color: #333;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="container">
      <h1 class="logo">فضفضة - الدفع</h1>
    </div>
  </header>

  <main class="payment-container">
    <h2>ملخص الحجز</h2>
    <div id="summary"></div>

    <h3>خيارات الدفع</h3>

    <a href="#" id="paypalBtn" class="btn-paypal" target="_blank" rel="noopener noreferrer">الدفع عبر PayPal</a>

    <div class="bank-details">
      <h4>التحويل البنكي</h4>
      <p>رقم الحساب: 123456789</p>
      <p>اسم البنك: بنك فضفضة</p>
      <p>بعد التحويل، يرجى التواصل عبر واتساب: <a href="https://wa.me/967718488431" target="_blank" rel="noopener noreferrer">00967718488431</a></p>
    </div>
  </main>

  <script>
    const bookingData = JSON.parse(localStorage.getItem('bookingData'));

    if (!bookingData) {
      document.getElementById('summary').innerHTML = '<p>لم يتم العثور على بيانات الحجز. الرجاء العودة وحجز جلسة أولاً.</p>';
      document.getElementById('paypalBtn').style.display = 'none';
    } else {
      const summaryEl = document.getElementById('summary');
      const sessionTypeText = bookingData.sessionType === 'text' ? 'دردشة نصية' :
                              bookingData.sessionType === 'audio' ? 'دردشة صوتية' : 'دردشة فيديو';
      summaryEl.innerHTML = `
        <p><strong>اسم المستخدم:</strong> ${bookingData.username}</p>
        <p><strong>نوع الجلسة:</strong> ${sessionTypeText}</p>
        <p><strong>الجنس:</strong> ${bookingData.gender === 'male' ? 'ذكر' : 'أنثى'}</p>
        <p><strong>حفظ الجلسة:</strong> ${bookingData.saveSession === 'yes' ? 'نعم' : 'لا'}</p>
        <p><strong>مدة الجلسة:</strong> ${bookingData.duration == 0.5 ? 'نصف ساعة' : bookingData.duration == 1 ? 'ساعة' : 'ساعتين'}</p>
        <p><strong>السعر:</strong> ${bookingData.price}$</p>
      `;

      // إعداد رابط الدفع عبر PayPal
      const paypalEmail = "montherbadyan@gmail.com";
      const paypalUrl = new URL('https://www.paypal.com/cgi-bin/webscr');
      paypalUrl.searchParams.set('cmd', '_xclick');
      paypalUrl.searchParams.set('business', paypalEmail);
      paypalUrl.searchParams.set('item_name', `جلسة ${sessionTypeText} لمدة ${bookingData.duration} ساعة`);
      paypalUrl.searchParams.set('amount', bookingData.price);
      paypalUrl.searchParams.set('currency_code', 'USD');
      paypalUrl.searchParams.set('return', 'https://yourwebsite.com/payment-success'); // عدل حسب موقعك
      paypalUrl.searchParams.set('cancel_return', 'https://yourwebsite.com/payment-cancel'); // عدل حسب موقعك

      document.getElementById('paypalBtn').href = paypalUrl.toString();
    }
  </script>
</body>
</html>
